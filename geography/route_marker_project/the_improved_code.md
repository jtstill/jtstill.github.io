---
layout: archive
title:  "Route Marker Project"
tagline: "A Better Approach"
author: Jack Still
author_profile: true
header:
 teaser: "assets/images/north_of_sedona.jpg"
 overlay_image: "assets/images/north_of_sedona.jpg"
 # caption: "Photo credit: me"
 description: A picture I took north of Sedona, AZ in August 2022
---
<a href="javascript:window.history.back();">Go Back</a>

[Go to Highways Home](/geography/route_marker_project/highways_home)

<h3 class="archive__subtitle">The Improved Code</h3>
I started with an outline that I found online, i.e. sample code for the N-Queens problem. Along with having to modify the violation parameters (as mentioned before, diagonals are irrelevant, but "existing" spots matter), I also had to make sure I read in the file with the possibilities for each state and build what I called my "reference board" – the two-dimensional array that I would use to check whether a highway existed in a certain state. After some careful thought, I was also able to visually produce this board, with 1’s representing valid spaces and 0’s representing non-existent/non-doable choices (colored green and red in the output for convenience). From here, I could modify the N-Queens algorithm to look for my solutions.

With a few slight hiccups taken care of, my algorithm was finally working on the small dataset from the example on the previous page. When I expanded my search to the full 50 states, however, I ran into a few other problems. First, it wasn’t getting past row 25 or so, popping between 19-22 repeatedly, almost as if in a loop. I quickly realized the problem: I had it set up so that states made up the columns and highway numbers made up the rows. So, even though I had the states organized in the dictionary from least choice to most choice (states like Arizona, with only route 24, were on the left, and states like Pennsylvania, which is relatively free choice since I live there, were on the right), it was getting bogged down at the end of every row. To fix this, I transposed my reference board such that states were now the rows and state highway numbers the columns. 

My improved reference board with "doable" state routes marked as a green "1":
![](/geography/route_marker_project/images/reference_board.png)


As a result, the algorithm would in theory quickly get through the first rows like Arizona and Nevada, having only one choice each, and spend more time only toward the end when it ran into high-choice states like Pennsylvania. This nearly guarantees never having to return all the way to early rows. This made for another interesting dilemma...

<h3 class="archive__subtitle">Expanding the Search</h3>
--EDIT THE FORMATTING OF THIS!!!---
Remember when I calculated the number of possible combinations of highway numbers without dependencies? Even with the reduced choice space, I ended up with something like 10^23 solutions. As it turns out, the dependencies (i.e. not being able to pick a number like 40 once it’s already been used) make a significant difference! I only got about halfway until there were quite literally no solutions to my problem.

In my efforts to be both a) realistic about how far I’d go out of my way to get a picture with a silly little highway sign and b) aware of conserving computer power/time, I’d inadvertently narrowed down my choices too far. By the time I got to Florida, all the signs I’d flagged as “possible” had been eaten up in some combination or another by the previous states. So, I had to expand a bit.

Little by little, I widened my search, considering places a bit further off the touristy track in the states where either the algorithm was getting stuck or where I thought I might be more likely to travel (whether someplace big with lots of attractions like California or somewhere close such as Delaware or Ohio). It took a lot of fiddling, but eventually I broke through. The first time a solution popped into view, 13 others showed up with it. Below is a view of what a solution looked like:
 
As you can see, there is one X in every row and one X in every column, with no overlap whatsoever. Every number has its place in every state!
![](/geography/route_marker_project/images/solution_board.png)



In list format (also generated by my program), the solution above looks like:
```
['AZ 24', 'CO 9' , 'KS 27', 'MD 42', 'MO 19', 'NV 28', 'WV 43', 'WY 22', 'AK 1' , 'AR 50',
 'HI 11', 'IL 48', 'IN 38', 'MA 6' , 'MT 40', 'NE 31', 'NH 16', 'NJ 37', 'ND 15', 'OK 3' , 
 'SD 44', 'WI 21', 'ID 33', 'IA 13', 'KY 36', 'LA 46', 'MS 18', 'TN 14', 'VT 30', 'AL 17',
 'NM 47', 'NY 39', 'NC 49', 'RI 10', 'TX 5' , 'VA 8' , 'ME 4' , 'CT 32', 'FL 26', 'OH 41',
 'WA 7' , 'MI 25', 'MN 29', 'OR 34', 'UT 12', 'DE 2' , 'SC 35', 'CA 45', 'GA 20', 'PA 23']
```

In all (at least for this version, which finds 14 total solutions), the entire process took less than a minute to run, is completely automatic given a correctly formatted text file (each line is of the form “[state]: [comma-separated numbers]” and lines generally run shortest to longest), and even looks pretty enough for my purposes! A problem that started as a theoretical stab in the dark has actually manifested as a practical program, and hopefully it will act as an easy tool that I can use to plan out my side trips and test if getting the next picture is worth it!
